# ğŸ“ Cáº¢I TIáº¾N MODULE GHI THU/CHI

## âœ… Váº¤N Äá»€ ÄÃƒ GIáº¢I QUYáº¾T

### TrÆ°á»›c Ä‘Ã¢y:
- âŒ Chá»‰ cÃ³ thá»ƒ chá»n 1 danh má»¥c
- âŒ Pháº£i tá»± nháº­p sá»‘ tiá»n thá»§ cÃ´ng
- âŒ KhÃ´ng tá»± Ä‘á»™ng tÃ­nh tá»•ng
- âŒ KhÃ³ ghi chi phÃ­ nhiá»u loáº¡i cÃ¹ng lÃºc
- âŒ Dá»¯ liá»‡u rá»i ráº¡c, thiáº¿u logic liÃªn káº¿t

### BÃ¢y giá»:
- âœ… **Chá»n nhiá»u danh má»¥c** trong 1 giao dá»‹ch
- âœ… **Tá»± Ä‘á»™ng tÃ­nh tá»•ng tiá»n** theo thá»i gian thá»±c
- âœ… **ThÃªm/XÃ³a danh má»¥c** linh hoáº¡t
- âœ… **MÃ´ táº£ riÃªng** cho tá»«ng danh má»¥c
- âœ… **NhÃ³m giao dá»‹ch liÃªn quan** vá»›i transaction_group
- âœ… **LiÃªn káº¿t logic** vá»›i ÄÆ¡n hÃ ng/TÃ i xáº¿/Xe

## ğŸ¯ CÃCH Sá»¬ Dá»¤NG

### 1. Ghi chi phÃ­ Ä‘Æ¡n giáº£n (1 danh má»¥c)

**BÆ°á»›c 1:** VÃ o menu **"ğŸ’° Thu Chi"** â†’ Click **"â• Ghi Thu/Chi"**

**BÆ°á»›c 2:** Äiá»n thÃ´ng tin cÆ¡ báº£n:
- **NgÃ y giao dá»‹ch**: Chá»n ngÃ y
- **Loáº¡i**: Chá»n "ğŸ’¸ Chi" hoáº·c "ğŸ’µ Thu"

**BÆ°á»›c 3:** Chá»n danh má»¥c vÃ  nháº­p sá»‘ tiá»n:
- Danh má»¥c sáº½ tá»± Ä‘á»™ng hiá»ƒn thá»‹ theo loáº¡i Ä‘Ã£ chá»n
- Nháº­p sá»‘ tiá»n
- MÃ´ táº£ chi tiáº¿t (tÃ¹y chá»n)
- **Tá»•ng cá»™ng** sáº½ tá»± Ä‘á»™ng cáº­p nháº­t

**BÆ°á»›c 4:** Äiá»n thÃ´ng tin khÃ¡c:
- MÃ´ táº£ chung
- PhÆ°Æ¡ng thá»©c thanh toÃ¡n
- LiÃªn káº¿t vá»›i ÄÆ¡n hÃ ng/TÃ i xáº¿/Xe (náº¿u cÃ³)

**BÆ°á»›c 5:** Click **"ğŸ’¾ LÆ°u"**

### 2. Ghi chi phÃ­ nhiá»u danh má»¥c (VÃ Dá»¤: Äá»• xÄƒng + Báº£o dÆ°á»¡ng)

**VÃ­ dá»¥ thá»±c táº¿:** Xe Ä‘i Ä‘á»• xÄƒng 2 triá»‡u, vá»«a báº£o dÆ°á»¡ng thÃªm 1.5 triá»‡u

**BÆ°á»›c 1:** VÃ o **"Ghi Thu/Chi"**

**BÆ°á»›c 2:** Chá»n **"ğŸ’¸ Chi"**

**BÆ°á»›c 3:** DÃ²ng Ä‘áº§u tiÃªn:
- Chá»n **"â›½ Chi phÃ­ nhiÃªn liá»‡u"**
- Nháº­p **2,000,000**
- MÃ´ táº£: "Äá»• xÄƒng táº¡i tráº¡m PTT"

**BÆ°á»›c 4:** Click **"â• ThÃªm danh má»¥c"**

**BÆ°á»›c 5:** DÃ²ng thá»© 2:
- Chá»n **"ğŸ”§ Báº£o dÆ°á»¡ng"**
- Nháº­p **1,500,000**
- MÃ´ táº£: "Thay dáº§u Ä‘á»™ng cÆ¡"

**BÆ°á»›c 6:** Xem tá»•ng cá»™ng:
- Há»‡ thá»‘ng tá»± Ä‘á»™ng tÃ­nh: **3,500,000 Ä‘**

**BÆ°á»›c 7:** Äiá»n thÃ´ng tin chung:
- MÃ´ táº£ chung: "Chi phÃ­ xe 50E21256 ngÃ y 07/01/2026"
- LiÃªn káº¿t Xe: Chá»n "50E21256"
- PhÆ°Æ¡ng thá»©c: Chuyá»ƒn khoáº£n

**BÆ°á»›c 8:** Click **"ğŸ’¾ LÆ°u"**

Há»‡ thá»‘ng sáº½ táº¡o **2 giao dá»‹ch riÃªng biá»‡t** nhÆ°ng Ä‘Æ°á»£c nhÃ³m láº¡i vá»›i nhau.

### 3. Sá»­a/XÃ³a danh má»¥c

**XÃ³a danh má»¥c:**
- Click nÃºt **ğŸ—‘ï¸** bÃªn pháº£i dÃ²ng muá»‘n xÃ³a
- LÆ°u Ã½: Pháº£i cÃ³ Ã­t nháº¥t 1 danh má»¥c

**ThÃªm danh má»¥c:**
- Click nÃºt **"â• ThÃªm danh má»¥c"** phÃ­a trÃªn
- DÃ²ng má»›i sáº½ xuáº¥t hiá»‡n á»Ÿ cuá»‘i

**Sá»­a sá»‘ tiá»n:**
- Nháº­p sá»‘ tiá»n má»›i â†’ Tá»•ng cá»™ng tá»± Ä‘á»™ng cáº­p nháº­t

## ğŸ’¡ CÃC DANH Má»¤C CHI PHÃ

### Khi chá»n "ğŸ’¸ Chi":
1. **â›½ Chi phÃ­ nhiÃªn liá»‡u** - Äá»• xÄƒng, dáº§u diesel
2. **ğŸ’µ LÆ°Æ¡ng** - Tráº£ lÆ°Æ¡ng tÃ i xáº¿, nhÃ¢n viÃªn
3. **ğŸ”§ Báº£o dÆ°á»¡ng** - Sá»­a chá»¯a, báº£o dÆ°á»¡ng xe
4. **ğŸ›¡ï¸ Báº£o hiá»ƒm** - Báº£o hiá»ƒm xe, báº£o hiá»ƒm tÃ i xáº¿
5. **ğŸ’° Thuáº¿** - Thuáº¿ Ä‘Æ°á»ng bá»™, phÃ­ Ä‘Äƒng kiá»ƒm
6. **âš ï¸ Pháº¡t** - Pháº¡t nguá»™i, pháº¡t vi pháº¡m giao thÃ´ng
7. **â– Chi khÃ¡c** - Chi phÃ­ khÃ¡c

### Khi chá»n "ğŸ’µ Thu":
1. **ğŸšš CÆ°á»›c váº­n chuyá»ƒn** - Thu tá»« khÃ¡ch hÃ ng
2. **â• Thu khÃ¡c** - Thu khÃ¡c

## ğŸ”— LIÃŠN Káº¾T Dá»® LIá»†U

### LiÃªn káº¿t vá»›i ÄÆ¡n hÃ ng
**Khi nÃ o dÃ¹ng:**
- Chi phÃ­ liÃªn quan Ä‘áº¿n Ä‘Æ¡n hÃ ng cá»¥ thá»ƒ
- VD: XÄƒng xe cho Ä‘Æ¡n #DH2026001

**Lá»£i Ã­ch:**
- Theo dÃµi chi phÃ­ theo Ä‘Æ¡n hÃ ng
- TÃ­nh lÃ£i/lá»— chÃ­nh xÃ¡c
- BÃ¡o cÃ¡o chi tiáº¿t theo Ä‘Æ¡n

### LiÃªn káº¿t vá»›i TÃ i xáº¿
**Khi nÃ o dÃ¹ng:**
- Chi phÃ­ liÃªn quan Ä‘áº¿n tÃ i xáº¿
- VD: Tráº£ lÆ°Æ¡ng, pháº¡t, thÆ°á»Ÿng

**Lá»£i Ã­ch:**
- Theo dÃµi chi phÃ­ theo tÃ i xáº¿
- Tá»± Ä‘á»™ng cáº­p nháº­t khi tÃ­nh lÆ°Æ¡ng
- BÃ¡o cÃ¡o hiá»‡u suáº¥t tÃ i xáº¿

### LiÃªn káº¿t vá»›i Xe
**Khi nÃ o dÃ¹ng:**
- Chi phÃ­ liÃªn quan Ä‘áº¿n xe cá»¥ thá»ƒ
- VD: Báº£o dÆ°á»¡ng, sá»­a chá»¯a, Ä‘á»• xÄƒng

**Lá»£i Ã­ch:**
- Theo dÃµi chi phÃ­ theo xe
- Lá»‹ch sá»­ báº£o trÃ¬ xe
- TÃ­nh kháº¥u hao

## ğŸ“Š XEM Dá»® LIá»†U

### Trong báº£ng Thu Chi
Má»—i dÃ²ng hiá»ƒn thá»‹:
- **NgÃ y**: NgÃ y giao dá»‹ch
- **Loáº¡i**: Thu/Chi
- **Danh má»¥c**: Loáº¡i chi phÃ­
- **Sá»‘ tiá»n**: Sá»‘ tiá»n vá»›i mÃ u sáº¯c (Ä‘á» = chi, xanh = thu)
- **MÃ´ táº£**: MÃ´ táº£ chi tiáº¿t
- **LiÃªn káº¿t**: ÄÆ¡n hÃ ng/TÃ i xáº¿/Xe (náº¿u cÃ³)

### Xem chi tiáº¿t
Click vÃ o dÃ²ng â†’ Xem Ä‘áº§y Ä‘á»§ thÃ´ng tin:
- NgÃ y giao dá»‹ch
- PhÆ°Æ¡ng thá»©c thanh toÃ¡n
- Sá»‘ tham chiáº¿u
- Ghi chÃº
- NgÆ°á»i táº¡o

### CÃ¡c giao dá»‹ch cÃ¹ng nhÃ³m
Náº¿u ghi nhiá»u danh má»¥c cÃ¹ng lÃºc, cÃ¡c giao dá»‹ch sáº½ cÃ³:
- **CÃ¹ng ngÃ y**
- **CÃ¹ng phÆ°Æ¡ng thá»©c thanh toÃ¡n**
- **CÃ¹ng liÃªn káº¿t** (Ä‘Æ¡n hÃ ng/tÃ i xáº¿/xe)
- **MÃ´ táº£ tÆ°Æ¡ng tá»±**

## ğŸ¨ GIAO DIá»†N Má»šI

### Tá»•ng cá»™ng tá»± Ä‘á»™ng
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’° Tá»”NG Cá»˜NG:        3,500,000 Ä‘   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- MÃ u gradient Ä‘áº¹p máº¯t
- Cáº­p nháº­t theo thá»i gian thá»±c
- Font chá»¯ lá»›n, dá»… nhÃ¬n

### DÃ²ng danh má»¥c
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Danh má»¥c â–¼]  [Sá»‘ tiá»n]  [MÃ´ táº£ chi tiáº¿t]  [ğŸ—‘ï¸] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Layout ngang, dá»… nhÃ¬n
- NÃºt xÃ³a bÃªn pháº£i
- Hover hiá»ƒn thá»‹ hiá»‡u á»©ng

### NÃºt thÃªm danh má»¥c
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â• ThÃªm danh má»¥c             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš™ï¸ Ká»¸ THUáº¬T

### Database Schema
```sql
ALTER TABLE cash_flow ADD COLUMN transaction_group INTEGER;
ALTER TABLE cash_flow ADD COLUMN category_details TEXT;
```

- **transaction_group**: Timestamp Ä‘á»ƒ nhÃ³m cÃ¡c giao dá»‹ch liÃªn quan
- **category_details**: JSON chá»©a chi tiáº¿t tá»«ng danh má»¥c

### Logic lÆ°u dá»¯ liá»‡u

**TrÆ°á»ng há»£p 1: Táº¡o má»›i (nhiá»u danh má»¥c)**
```javascript
// LÆ°u 3 giao dá»‹ch riÃªng biá»‡t
// CÃ¹ng transaction_group
{
  category: 'fuel_cost',
  amount: 2000000,
  transaction_group: 1736236800000
}
{
  category: 'maintenance',
  amount: 1500000,
  transaction_group: 1736236800000
}
```

**TrÆ°á»ng há»£p 2: Sá»­a (backward compatible)**
```javascript
// Chá»‰ cáº­p nháº­t 1 record
// LÆ°u chi tiáº¿t vÃ o category_details
{
  category: 'fuel_cost', // danh má»¥c Ä‘áº§u tiÃªn
  amount: 3500000, // tá»•ng
  category_details: JSON.stringify([
    {category: 'fuel_cost', amount: 2000000},
    {category: 'maintenance', amount: 1500000}
  ])
}
```

### Validation

1. **Pháº£i cÃ³ Ã­t nháº¥t 1 danh má»¥c**
2. **Má»—i danh má»¥c pháº£i cÃ³:**
   - Loáº¡i danh má»¥c Ä‘Æ°á»£c chá»n
   - Sá»‘ tiá»n > 0
3. **MÃ´ táº£ chung báº¯t buá»™c**
4. **NgÃ y giao dá»‹ch báº¯t buá»™c**
5. **Loáº¡i (Thu/Chi) báº¯t buá»™c**

## ğŸ“± RESPONSIVE

Form tá»± Ä‘á»™ng Ä‘iá»u chá»‰nh:
- Desktop: 3 cá»™t (Danh má»¥c | Sá»‘ tiá»n | MÃ´ táº£)
- Tablet: 2 cá»™t
- Mobile: 1 cá»™t (xáº¿p chá»“ng)

## ğŸ”’ Báº¢O Máº¬T

- Chá»‰ **Admin** vÃ  **Accountant** má»›i Ä‘Æ°á»£c thÃªm/sá»­a
- Chá»‰ **Admin** má»›i Ä‘Æ°á»£c xÃ³a
- Audit log ghi láº¡i má»i thao tÃ¡c
- Token authentication

## ğŸ› Xá»¬ LÃ Lá»–I

### Lá»—i: "Vui lÃ²ng thÃªm Ã­t nháº¥t 1 danh má»¥c"
**NguyÃªn nhÃ¢n:** ChÆ°a cÃ³ danh má»¥c nÃ o
**Giáº£i phÃ¡p:** Click "â• ThÃªm danh má»¥c"

### Lá»—i: "Vui lÃ²ng chá»n danh má»¥c cho dÃ²ng X"
**NguyÃªn nhÃ¢n:** DÃ²ng X chÆ°a chá»n danh má»¥c
**Giáº£i phÃ¡p:** Chá»n danh má»¥c tá»« dropdown

### Lá»—i: "Vui lÃ²ng nháº­p sá»‘ tiá»n cho dÃ²ng X"
**NguyÃªn nhÃ¢n:** Sá»‘ tiá»n = 0 hoáº·c chÆ°a nháº­p
**Giáº£i phÃ¡p:** Nháº­p sá»‘ tiá»n > 0

### Lá»—i khi lÆ°u
**NguyÃªn nhÃ¢n:** Lá»—i server hoáº·c máº¥t káº¿t ná»‘i
**Giáº£i phÃ¡p:**
1. Kiá»ƒm tra káº¿t ná»‘i máº¡ng
2. Reload trang
3. Thá»­ láº¡i

## ğŸ“ˆ BÃO CÃO

### Xem theo danh má»¥c
```
â›½ Chi phÃ­ nhiÃªn liá»‡u: 45,000,000 Ä‘ (30%)
ğŸ’µ LÆ°Æ¡ng:              35,000,000 Ä‘ (23%)
ğŸ”§ Báº£o dÆ°á»¡ng:         20,000,000 Ä‘ (13%)
```

### Xem theo xe
```
50E21256: 15,000,000 Ä‘
50E33148: 12,000,000 Ä‘
```

### Xem theo tÃ i xáº¿
```
NGUYá»„N VÄ‚N CHÆ N: 8,000,000 Ä‘
LÃŠ VÄ‚N B: 7,500,000 Ä‘
```

## ğŸ’¡ Máº¸O Sá»¬ Dá»¤NG

1. **Ghi chi phÃ­ ngay khi phÃ¡t sinh** - KhÃ´ng Ä‘á»ƒ tÃ­ch lÅ©y
2. **LiÃªn káº¿t Ä‘áº§y Ä‘á»§** - LiÃªn káº¿t vá»›i Ä‘Æ¡n hÃ ng/tÃ i xáº¿/xe Ä‘á»ƒ dá»… theo dÃµi
3. **MÃ´ táº£ chi tiáº¿t** - Viáº¿t rÃµ rÃ ng Ä‘á»ƒ sau nÃ y dá»… tÃ¬m
4. **PhÃ¢n loáº¡i Ä‘Ãºng** - Chá»n Ä‘Ãºng danh má»¥c Ä‘á»ƒ bÃ¡o cÃ¡o chÃ­nh xÃ¡c
5. **LÆ°u chá»©ng tá»«** - Ghi sá»‘ hÃ³a Ä‘Æ¡n vÃ o "Sá»‘ tham chiáº¿u"

## â“ FAQ

**Q: CÃ³ thá»ƒ sá»­a giao dá»‹ch Ä‘Ã£ lÆ°u khÃ´ng?**
A: CÃ³, click vÃ o dÃ²ng â†’ Sá»­a â†’ LÆ°u

**Q: XÃ³a danh má»¥c sáº½ áº£nh hÆ°á»Ÿng gÃ¬?**
A: KhÃ´ng áº£nh hÆ°á»Ÿng gÃ¬. Dá»¯ liá»‡u cÅ© váº«n giá»¯ nguyÃªn.

**Q: Tá»‘i Ä‘a bao nhiÃªu danh má»¥c?**
A: KhÃ´ng giá»›i háº¡n, nhÆ°ng khuyáº¿n nghá»‹ < 10 Ä‘á»ƒ dá»… quáº£n lÃ½

**Q: CÃ³ thá»ƒ import tá»« Excel khÃ´ng?**
A: Hiá»‡n táº¡i chÆ°a cÃ³, Ä‘ang phÃ¡t triá»ƒn

**Q: LÃ m sao biáº¿t cÃ¡c giao dá»‹ch cÃ¹ng nhÃ³m?**
A: Xem cá»™t transaction_group trong database hoáº·c lá»c theo ngÃ y + mÃ´ táº£ tÆ°Æ¡ng tá»±

---

**ğŸ“… Cáº­p nháº­t:** 07/01/2026  
**âœï¸ PhiÃªn báº£n:** 3.0  
**ğŸ¯ TÃ­nh nÄƒng:** Multi-category Cash Flow
