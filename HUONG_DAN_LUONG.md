# üîß H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG MODULE QU·∫¢N L√ù L∆Ø∆†NG

## üìã T·ªïng quan

Module Qu·∫£n l√Ω L∆∞∆°ng gi√∫p b·∫°n:
- T√≠nh l∆∞∆°ng th√°ng cho t√†i x·∫ø d·ª±a tr√™n s·ªë chuy·∫øn ho√†n th√†nh
- Qu·∫£n l√Ω th∆∞·ªüng/ph·∫°t
- Xem chi ti·∫øt v√† xu·∫•t b√°o c√°o Excel
- T·ª± ƒë·ªông c·∫≠p nh·∫≠t khi c√≥ thay ƒë·ªïi th∆∞·ªüng/ph·∫°t

## ‚úÖ V·∫§N ƒê·ªÄ ƒê√É ƒê∆Ø·ª¢C GI·∫¢I QUY·∫æT

### V·∫•n ƒë·ªÅ tr∆∞·ªõc ƒë√¢y:
- T√†i x·∫ø xu·∫•t hi·ªán 2 l·∫ßn trong b·∫£ng l∆∞∆°ng
- M·ªôt d√≤ng hi·ªÉn th·ªã l∆∞∆°ng th√°ng, m·ªôt d√≤ng hi·ªÉn th·ªã th∆∞·ªüng ri√™ng l·∫ª
- Th∆∞·ªüng/ph·∫°t kh√¥ng ƒë∆∞·ª£c t·ª± ƒë·ªông c·∫≠p nh·∫≠t v√†o b·∫£n l∆∞∆°ng

### Gi·∫£i ph√°p ƒë√£ √°p d·ª•ng:
1. ‚úÖ **T√°ch bi·ªát 2 tab**: "B·∫£ng l∆∞∆°ng" v√† "Th∆∞·ªüng/Ph·∫°t"
2. ‚úÖ **T·ª± ƒë·ªông c·∫≠p nh·∫≠t**: Khi th√™m/x√≥a th∆∞·ªüng ph·∫°t, b·∫£n l∆∞∆°ng t·ª± ƒë·ªông t√≠nh l·∫°i (n·∫øu ·ªü tr·∫°ng th√°i Nh√°p)
3. ‚úÖ **N√∫t "T√≠nh l·∫°i"**: Cho ph√©p t√≠nh l·∫°i b·∫£n l∆∞∆°ng b·∫•t k·ª≥ l√∫c n√†o
4. ‚úÖ **N√∫t "Xem chi ti·∫øt"**: Xem chi ti·∫øt chuy·∫øn h√†ng, th∆∞·ªüng/ph·∫°t c·ªßa t·ª´ng th√°ng
5. ‚úÖ **Export Excel**: Xu·∫•t to√†n b·ªô d·ªØ li·ªáu l∆∞∆°ng ra file Excel

## üéØ C√ÅCH S·ª¨ D·ª§NG

### 1. T√≠nh l∆∞∆°ng th√°ng cho t√†i x·∫ø

**B∆∞·ªõc 1:** Click n√∫t **"‚ûï T√≠nh l∆∞∆°ng th√°ng"**

**B∆∞·ªõc 2:** Ch·ªçn th√¥ng tin:
- **T√†i x·∫ø**: Ch·ªçn t√†i x·∫ø c·∫ßn t√≠nh l∆∞∆°ng
- **Th√°ng**: Ch·ªçn th√°ng (m·∫∑c ƒë·ªãnh l√† th√°ng tr∆∞·ªõc)
- **L∆∞∆°ng c∆° b·∫£n**: Nh·∫≠p l∆∞∆°ng c∆° b·∫£n (m·∫∑c ƒë·ªãnh 8.000.000 ƒë)

**B∆∞·ªõc 3:** Click **"üîç T√≠nh to√°n"** ƒë·ªÉ xem preview

H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông:
- ƒê·∫øm s·ªë chuy·∫øn ho√†n th√†nh trong th√°ng
- T√≠nh t·ªïng th∆∞·ªüng t·ª´ b·∫£ng Th∆∞·ªüng/Ph·∫°t
- T√≠nh t·ªïng ph·∫°t t·ª´ b·∫£ng Th∆∞·ªüng/Ph·∫°t
- T√≠nh t·∫°m ·ª©ng ch∆∞a quy·∫øt to√°n
- T√≠nh t·ªïng l∆∞∆°ng = C∆° b·∫£n + Th∆∞·ªüng - Ph·∫°t - T·∫°m ·ª©ng

**B∆∞·ªõc 4:** N·∫øu ƒë·ªìng √Ω, click **"üíæ L∆∞u b·∫£n l∆∞∆°ng"**

> **L∆∞u √Ω:** B·∫£n l∆∞∆°ng m·ªõi ƒë∆∞·ª£c t·∫°o ·ªü tr·∫°ng th√°i "Nh√°p". B·∫°n c√≥ th·ªÉ s·ª≠a ho·∫∑c x√≥a.

### 2. Th√™m th∆∞·ªüng/ph·∫°t cho t√†i x·∫ø

**B∆∞·ªõc 1:** Click n√∫t **"‚≠ê Th∆∞·ªüng/Ph·∫°t"**

**B∆∞·ªõc 2:** ƒêi·ªÅn th√¥ng tin:
- **T√†i x·∫ø**: Ch·ªçn t√†i x·∫ø
- **Lo·∫°i**: Th∆∞·ªüng ho·∫∑c Ph·∫°t
- **Ng√†y**: Ng√†y th∆∞·ªüng/ph·∫°t
- **S·ªë ti·ªÅn**: Nh·∫≠p s·ªë ti·ªÅn (VNƒê)
- **L√Ω do**: M√¥ t·∫£ l√Ω do (v√≠ d·ª•: "Ho√†n th√†nh t·ªët nhi·ªám v·ª• ƒë∆∞·ª£c giao")
- **ƒê∆°n h√†ng li√™n quan** (t√πy ch·ªçn): N·∫øu c√≥

**B∆∞·ªõc 3:** Click **"üíæ L∆∞u"**

> **‚ú® T·ª∞ ƒê·ªòNG C·∫¨P NH·∫¨T**: N·∫øu ƒë√£ c√≥ b·∫£n l∆∞∆°ng th√°ng ƒë√≥ ·ªü tr·∫°ng th√°i "Nh√°p", h·ªá th·ªëng s·∫Ω **t·ª± ƒë·ªông t√≠nh l·∫°i** v√† c·∫≠p nh·∫≠t th∆∞·ªüng/ph·∫°t v√†o b·∫£n l∆∞∆°ng!

### 3. Xem chi ti·∫øt b·∫£n l∆∞∆°ng

**B∆∞·ªõc 1:** Trong b·∫£ng l∆∞∆°ng, click n√∫t **"üëÅÔ∏è Xem chi ti·∫øt"**

Modal chi ti·∫øt s·∫Ω hi·ªÉn th·ªã:
- **Th√¥ng tin t·ªïng quan**: L∆∞∆°ng c∆° b·∫£n, s·ªë chuy·∫øn, tr·∫°ng th√°i
- **Danh s√°ch chuy·∫øn h√†ng ho√†n th√†nh**: M√£ ƒë∆°n, ng√†y, kh√°ch h√†ng, gi√° tr·ªã
- **Danh s√°ch th∆∞·ªüng/ph·∫°t**: Ng√†y, lo·∫°i, s·ªë ti·ªÅn, l√Ω do
- **B·∫£ng t·ªïng k·∫øt**: Chi ti·∫øt t√≠nh to√°n t·ª´ng kho·∫£n

**C·∫£nh b√°o th√¥ng minh:**
- N·∫øu c√≥ th∆∞·ªüng/ph·∫°t nh∆∞ng ch∆∞a ƒë∆∞·ª£c t√≠nh v√†o b·∫£n l∆∞∆°ng, h·ªá th·ªëng s·∫Ω hi·ªÉn th·ªã c·∫£nh b√°o m√†u v√†ng
- Click n√∫t **"üîÑ T√≠nh l·∫°i b·∫£n l∆∞∆°ng"** ƒë·ªÉ c·∫≠p nh·∫≠t

### 4. T√≠nh l·∫°i b·∫£n l∆∞∆°ng

**Khi n√†o c·∫ßn t√≠nh l·∫°i?**
- Th√™m/x√≥a th∆∞·ªüng ph·∫°t sau khi ƒë√£ t·∫°o b·∫£n l∆∞∆°ng
- C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng (t·ª´ "ƒêang v·∫≠n chuy·ªÉn" ‚Üí "Ho√†n th√†nh")
- Ph√°t hi·ªán s·ªë li·ªáu kh√¥ng ch√≠nh x√°c

**C√°ch 1:** Trong modal chi ti·∫øt, click **"üîÑ T√≠nh l·∫°i"**

**C√°ch 2:** Trong tab "B·∫£ng l∆∞∆°ng", click n√∫t **"‚úèÔ∏è S·ª≠a"**, sau ƒë√≥ click **"üîÑ T√≠nh l·∫°i"**

> **L∆∞u √Ω:** Ch·ªâ c√≥ th·ªÉ t√≠nh l·∫°i b·∫£n l∆∞∆°ng ·ªü tr·∫°ng th√°i "Nh√°p". B·∫£n l∆∞∆°ng ƒë√£ "Duy·ªát" ho·∫∑c "ƒê√£ tr·∫£" kh√¥ng th·ªÉ t√≠nh l·∫°i.

### 5. Duy·ªát v√† tr·∫£ l∆∞∆°ng

**Duy·ªát b·∫£n l∆∞∆°ng:**
- Click n√∫t **"‚úÖ Duy·ªát"** trong c·ªôt Thao t√°c
- Sau khi duy·ªát, b·∫£n l∆∞∆°ng kh√¥ng th·ªÉ s·ª≠a ho·∫∑c x√≥a

**Tr·∫£ l∆∞∆°ng:**
- Click n√∫t **"üí∞ Tr·∫£ l∆∞∆°ng"**
- Ch·ªçn ng√†y tr·∫£ v√† ph∆∞∆°ng th·ª©c thanh to√°n (Ti·ªÅn m·∫∑t/Chuy·ªÉn kho·∫£n)
- Sau khi tr·∫£, tr·∫°ng th√°i chuy·ªÉn sang "ƒê√£ tr·∫£"

### 6. Export d·ªØ li·ªáu ra Excel

**B∆∞·ªõc 1:** L·ªçc d·ªØ li·ªáu (t√πy ch·ªçn):
- Ch·ªçn th√°ng trong dropdown "-- T·∫•t c·∫£ th√°ng --"
- Ch·ªçn t√†i x·∫ø trong dropdown "-- T·∫•t c·∫£ t√†i x·∫ø --"

**B∆∞·ªõc 2:** Click n√∫t **"üìä Export Excel"**

File Excel s·∫Ω ƒë∆∞·ª£c t·∫£i xu·ªëng v·ªõi t√™n: `Luong_TaiXe_2026-01_[timestamp].xls`

File bao g·ªìm:
- Ti√™u ƒë·ªÅ: "B·∫¢NG L∆Ø∆†NG T√ÄI X·∫æ - TH√ÅNG [th√°ng]"
- Ng√†y xu·∫•t
- B·∫£ng d·ªØ li·ªáu ƒë·∫ßy ƒë·ªß
- D√≤ng t·ªïng c·ªông ·ªü cu·ªëi

## üìä HI·ªÇU V·ªÄ C√ÅC TAB

### Tab "B·∫£ng l∆∞∆°ng"
Hi·ªÉn th·ªã **b·∫£n l∆∞∆°ng t·ªïng h·ª£p theo th√°ng** cho t·ª´ng t√†i x·∫ø:
- M·ªói t√†i x·∫ø c√≥ **1 d√≤ng duy nh·∫•t** cho m·ªói th√°ng
- Hi·ªÉn th·ªã: Th√°ng, T√†i x·∫ø, L∆∞∆°ng c∆° b·∫£n, S·ªë chuy·∫øn, Th∆∞·ªüng, Ph·∫°t, T·∫°m ·ª©ng, T·ªïng l∆∞∆°ng
- ƒê√¢y l√† b·∫£ng **ch√≠nh th·ª©c** ƒë·ªÉ duy·ªát v√† tr·∫£ l∆∞∆°ng

### Tab "Th∆∞·ªüng/Ph·∫°t"
Hi·ªÉn th·ªã **t·ª´ng kho·∫£n th∆∞·ªüng/ph·∫°t ri√™ng l·∫ª**:
- M·ªói kho·∫£n th∆∞·ªüng/ph·∫°t l√† 1 d√≤ng ri√™ng
- Hi·ªÉn th·ªã: Ng√†y, T√†i x·∫ø, Lo·∫°i, L√Ω do, S·ªë ti·ªÅn, ƒê∆°n h√†ng
- D√πng ƒë·ªÉ **xem chi ti·∫øt** v√† **qu·∫£n l√Ω** t·ª´ng kho·∫£n

**‚ùó QUAN TR·ªåNG:**
- Th∆∞·ªüng/ph·∫°t trong tab "Th∆∞·ªüng/Ph·∫°t" s·∫Ω **t·ª± ƒë·ªông ƒë∆∞·ª£c t√≠nh** v√†o "B·∫£ng l∆∞∆°ng"
- B·∫°n KH√îNG c·∫ßn nh·∫≠p th∆∞·ªüng/ph·∫°t 2 l·∫ßn
- N·∫øu th√™m th∆∞·ªüng/ph·∫°t sau khi ƒë√£ t·∫°o b·∫£n l∆∞∆°ng, h√£y click "T√≠nh l·∫°i"

## üîß SCRIPT B·∫¢O TR√å

### Ki·ªÉm tra d·ªØ li·ªáu l∆∞∆°ng
```bash
node check-salary-duplicates.js
```
Ki·ªÉm tra:
- B·∫£n l∆∞∆°ng tr√πng l·∫∑p (c√πng t√†i x·∫ø + th√°ng)
- B·∫£n l∆∞∆°ng ƒë√°ng ng·ªù (kh√¥ng c√≥ l∆∞∆°ng c∆° b·∫£n, kh√¥ng c√≥ chuy·∫øn)
- Th·ªëng k√™ th∆∞·ªüng/ph·∫°t

### Ki·ªÉm tra t√≠nh to√°n l∆∞∆°ng th√°ng c·ª• th·ªÉ
```bash
node check-salary-calculation.js
```
Ki·ªÉm tra chi ti·∫øt t√≠nh to√°n l∆∞∆°ng th√°ng 2026-01:
- So s√°nh th∆∞·ªüng/ph·∫°t trong b·∫£ng l∆∞∆°ng vs th·ª±c t·∫ø
- Ki·ªÉm tra t·ªïng l∆∞∆°ng c√≥ ch√≠nh x√°c kh√¥ng
- Ph√°t hi·ªán th∆∞·ªüng/ph·∫°t ch∆∞a ƒë∆∞·ª£c t√≠nh v√†o

### S·ª≠a b·∫£n l∆∞∆°ng kh√¥ng ch√≠nh x√°c
```bash
node fix-salaries.js
```
T·ª± ƒë·ªông:
- Qu√©t t·∫•t c·∫£ b·∫£n l∆∞∆°ng
- T√≠nh l·∫°i th∆∞·ªüng/ph·∫°t t·ª´ database
- C·∫≠p nh·∫≠t b·∫£n l∆∞∆°ng n·∫øu ph√°t hi·ªán sai l·ªách

## üí° M·∫∏O S·ª¨ D·ª§NG

1. **T·∫°o b·∫£n l∆∞∆°ng ƒë·ªãnh k·ª≥**: M·ªói ƒë·∫ßu th√°ng, t√≠nh l∆∞∆°ng cho t·∫•t c·∫£ t√†i x·∫ø
2. **Gi·ªØ tr·∫°ng th√°i "Nh√°p"**: Trong su·ªët th√°ng ƒë·ªÉ c√≥ th·ªÉ c·∫≠p nh·∫≠t khi c√≥ th∆∞·ªüng/ph·∫°t m·ªõi
3. **Duy·ªát cu·ªëi th√°ng**: Sau khi ch·∫Øc ch·∫Øn t·∫•t c·∫£ d·ªØ li·ªáu ƒë√£ ƒë√∫ng
4. **Backup tr∆∞·ªõc khi tr·∫£**: Export Excel ƒë·ªÉ l∆∞u tr·ªØ tr∆∞·ªõc khi ƒë√°nh d·∫•u "ƒê√£ tr·∫£"
5. **Ki·ªÉm tra ƒë·ªãnh k·ª≥**: Ch·∫°y script `check-salary-calculation.js` m·ªói th√°ng

## ‚ùì GI·∫¢I ƒê√ÅP TH·∫ÆC M·∫ÆC

### Q: T·∫°i sao t√†i x·∫ø xu·∫•t hi·ªán nhi·ªÅu l·∫ßn?
**A:** Ki·ªÉm tra b·∫°n ƒëang xem tab n√†o:
- **Tab "B·∫£ng l∆∞∆°ng"**: M·ªói t√†i x·∫ø ch·ªâ xu·∫•t hi·ªán 1 l·∫ßn cho m·ªói th√°ng
- **Tab "Th∆∞·ªüng/Ph·∫°t"**: M·ªói kho·∫£n th∆∞·ªüng/ph·∫°t l√† 1 d√≤ng ri√™ng (b√¨nh th∆∞·ªùng)

### Q: Th√™m th∆∞·ªüng r·ªìi nh∆∞ng t·ªïng l∆∞∆°ng kh√¥ng tƒÉng?
**A:** C√≥ 2 tr∆∞·ªùng h·ª£p:
1. **B·∫£n l∆∞∆°ng ·ªü tr·∫°ng th√°i "Nh√°p"**: H·ªá th·ªëng ƒë√£ t·ª± ƒë·ªông c·∫≠p nh·∫≠t (reload l·∫°i trang)
2. **B·∫£n l∆∞∆°ng ƒë√£ "Duy·ªát" ho·∫∑c "ƒê√£ tr·∫£"**: Kh√¥ng th·ªÉ t·ª± ƒë·ªông c·∫≠p nh·∫≠t, c·∫ßn t·∫°o b·∫£n l∆∞∆°ng m·ªõi ho·∫∑c ƒëi·ªÅu ch·ªânh th·ªß c√¥ng

### Q: L√†m sao ƒë·ªÉ s·ª≠a b·∫£n l∆∞∆°ng ƒë√£ duy·ªát?
**A:** B·∫£n l∆∞∆°ng ƒë√£ duy·ªát kh√¥ng th·ªÉ s·ª≠a tr·ª±c ti·∫øp. Gi·∫£i ph√°p:
1. X√≥a b·∫£n l∆∞∆°ng c≈© (c·∫ßn quy·ªÅn admin)
2. T·∫°o b·∫£n l∆∞∆°ng m·ªõi v·ªõi s·ªë li·ªáu ch√≠nh x√°c
3. Ho·∫∑c t·∫°o kho·∫£n th∆∞·ªüng/ph·∫°t ƒëi·ªÅu ch·ªânh trong th√°ng sau

### Q: S·ªë chuy·∫øn kh√¥ng kh·ªõp v·ªõi ƒë∆°n h√†ng?
**A:** H·ªá th·ªëng ch·ªâ ƒë·∫øm ƒë∆°n h√†ng c√≥:
- **T√†i x·∫ø** ƒë∆∞·ª£c g√°n
- **Tr·∫°ng th√°i** = "Ho√†n th√†nh"
- **Ng√†y giao h√†ng** trong th√°ng t√≠nh l∆∞∆°ng

Ki·ªÉm tra 3 ƒëi·ªÅu ki·ªán tr√™n trong module "Qu·∫£n l√Ω ƒê∆°n h√†ng".

### Q: T√≠nh l·∫°i b·∫£n l∆∞∆°ng b·ªã l·ªói?
**A:** Ch·∫°y script ki·ªÉm tra:
```bash
node check-salary-calculation.js
```
N·∫øu v·∫´n l·ªói, li√™n h·ªá admin ƒë·ªÉ ki·ªÉm tra database.

## üìû H·ªñ TR·ª¢

N·∫øu g·∫∑p v·∫•n ƒë·ªÅ, vui l√≤ng:
1. Ch·∫°y script ki·ªÉm tra: `node check-salary-duplicates.js`
2. Ch·ª•p m√†n h√¨nh l·ªói
3. Ki·ªÉm tra console log (F12 ‚Üí Console)
4. Li√™n h·ªá b·ªô ph·∫≠n IT

---

**üìÖ C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: 2026-01**  
**‚úçÔ∏è Phi√™n b·∫£n: 2.0**
